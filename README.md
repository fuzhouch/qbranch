# Qbranch: Alternative implementation of Microsoft Bond

QBranch is a hobby project, which tries to provide an alternative
implementation of [Microsoft Bond](https://github.com/Microsoft/Bond),
which supports parsing Bond IDL definition and compatible binary
encode/decode protocol. While Bond tries to support multiple programming
languages, QBranch focuses only on Java eco-system.

# Regarding project name

Time to tell who is a true James Bond fan. :)

# Difference between QBranch and Microsoft Bond

People may have noticed Bond has an on-going effort to support Java (see
``jvm`` branch of https://github.com/Microsoft/Bond), so a good question
is: since official Microsoft Bond is working on JVM support, why do
we bother QBranch? A short answer is: you may not want QBranch at all.
A long version: you may choose QBranch or Bond/Java based on your project
needs.

Unlike official Bond/Java binding, QBranch is more a unofficial,
fun project for myself. Unlike the official Bond implementation, I would
like to take the chance to explore more possibilities.

The origin of two projects result in multiple differences:

1. **A (slightly) better generic support.** Bond supports defining
   structure with generic (type arguments). However, we may get different
   support level in different target programming languages. The official
   Bond introduces BondSerializable in both C# and Java, which limits
   type arguments to generic Bond structure. Meanwhile, QBranch want to
   see if we can remove the constrains and get almost the same support
   level just like C++.

2. **Limited feature set**. Due to constrains of my spare time,
   QBranch does not try to implement every feature from Bond. Instead,
   I pick some features useful based on my experience of using Bond. For
   example, QBranch implements only CompactBinary protocol for now.
   I may add more features based on feedbacks or my work experiences,
   but there's not guarantee.

3. **A Java-styled integration approach.** Official Bond uses gbc.exe
   as code generation compiler, which requires external dependency in
   build system. QBrnach, on the other hand, tries to provide a compiler
   written in Java/Kotlin, which can be implemented as a Maven/Gradle
   plug-in, which results in a better integration.


So developers can choose them based on their own consideration. If you
want a complete feature set of Bond with official support, you may go
with official Bond/Java. Or, if you care more about integration with
Java world, you may consider QBranch.

## Compatibility between QBranch and Bond

No matter how different QBranch becomes, there's one goal that should
be always kept: QBranch keeps protocol level compatibility with official
Bond. Any byte buffer encoded by QBranch should be decoded by
Microsoft Bond with same output, or vise versa, if the protocol is
claimed supported by QBranch. QBranch will never introduce
incompatible extension to existing Bond protocol.

Meanwhile, QBranch does not guarantee the compatibility in source code
level. For example, the Java source code generated by gbc.exe may not be
able to compile with QBranch's compiler.

# Build QBranch

By Oct. 2017, QBranch does not depend on official Bond to build the
code. Just simply clone the code and build with command below. Bond is
built and verified on Mac and Windows.

```
    REM Assume you are working at c:\myproject from a CMD window.
    REM Make sure you have Java 7 or above installed.

    cd c:\myproject
    git clone https://github.com/fuzhouch/qbranch qbranch

    pushd qbranch
    gradlew build
```
